# مستندات طراحی سیستم
## مصاحبه طراحی سیستم: راهنمایی از درون

<div dir="rtl" style="text-align: right; font-family: 'B Nazanin', 'Tahoma', Arial;">

---

### اطلاعات منبع
**مخزن اصلی:** `ehsan4232/translation`  
**تاریخ ایجاد:** ۱ اوت ۲۰۲۵  
**تعداد فایل‌ها:** ۴۹۰+ فایل (متن و تصویر)

---

## فایل ۱: 001.png
![تصویر معماری سیستم](https://raw.githubusercontent.com/ehsan4232/translation/master/001.png)

---

## فایل ۲: 002.txt

### مصاحبه طراحی سیستم: راهنمایی از درون

مصاحبه طراحی سیستم: راهنمایی از درون. تمامی حقوق محفوظ است. این کتاب یا هر قسمتی از آن نباید بدون اجازه کتبی صریح از ناشر به هیچ شکلی تکثیر یا استفاده شود، مگر برای استفاده از نقل‌قول‌های کوتاه در بررسی کتاب.

**درباره نویسنده:** الکس شو یک مهندس نرم‌افزار با تجربه و کارآفرین است. پیش از این، او در توییتر، اپل، زینگا و اوراکل کار کرده است. او مدرکش را در مقطع کارشناسی ارشد از دانشگاه کارنگی ملون دریافت کرده و علاقه بسیاری به طراحی و اجرای سیستم‌های پیچیده دارد.

لطفاً اگر می‌خواهید هنگام انتشار فصل‌های جدید به شما اطلاع داده شود، در لیست ایمیل ما عضو شوید: https://bit.ly/3dtIcsE

برای اطلاعات بیشتر، با systemdesigninsider@gmail.com تماس بگیرید.

**ویرایشگر:** پل سولومون.

---

## فایل ۳: 003.txt

### مفاهیم پایه

پایگاه‌های داده غیررابطه‌ای که به عنوان NoSQL databases شناخته می‌شوند، در چهار دسته طبقه‌بندی می‌شوند:

• **Key-value stores**
• **Graph stores** 
• **Column stores**
• **Document stores**

عملیات join معمولاً در پایگاه‌های داده غیررابطه‌ای پشتیبانی نمی‌شود.

برای اکثر توسعه‌دهندگان، پایگاه‌های داده رابطه‌ای بهترین گزینه هستند زیرا حدود ۴۰ سال است که وجود دارند و به خوبی کار می‌کنند. علاوه بر این، جامعه فعال و ابزارهای بالغی دارند. با این حال، اگر سرور رابطه‌ای نمی‌تواند نیازهای خاص شما را برآورده کند، بررسی پایگاه‌های داده غیررابطه‌ای بهتر است.

---

## فایل ۴: 004.txt

### مقیاس‌دهی سیستم

زمانی که کاربران بیشتری به سیستم شما می‌آیند، یک سرور برای مدیریت ترافیک کافی نیست. باید بیشتر بیندیشید. مقیاس‌دهی سرور به دو روش اصلی انجام می‌شود:

#### ۱. مقیاس‌دهی عمودی (Scale Up)
**مقیاس‌دهی عمودی** به معنای اضافه کردن قدرت بیشتر (CPU، RAM و غیره) به سرورهای شما است.

#### ۲. مقیاس‌دهی افقی (Scale Out)
**مقیاس‌دهی افقی** به شما این امکان را می‌دهد که با اضافه کردن سرورهای بیشتر به مجموعه منابع خود، مقیاس‌دهی کنید.

زمانی که ترافیک کم است، مقیاس‌دهی عمودی گزینه‌ای عالی است و سادگی آن از مزیت‌های اصلی‌اش محسوب می‌شود. متأسفانه، با محدودیت‌های جدی همراه است:

• **محدودیت سخت‌افزاری:** اضافه کردن تعداد نامحدود CPU و حافظه به یک سرور غیرممکن است.
• **عدم قابلیت Failover:** اگر یک سرور از کار بیفتد، وب‌سایت یا اپ به طور کامل از دسترس خارج می‌شود.

**نتیجه‌گیری:** مقیاس‌دهی افقی برای برنامه‌هایی با مقیاس بزرگ به دلیل محدودیت‌های مقیاس‌دهی عمودی، بیشتر مطلوب است.

---

## فایل ۵: 005.txt

### مشکلات دسترسی و راه‌حل Load Balancer

در طراحی قبلی، کاربران مستقیماً به سرور وب متصل می‌شوند. این طراحی مشکلاتی دارد:

**مشکلات:**
• اگر سرور وب آفلاین باشد، کاربران نمی‌توانند به وب‌سایت دسترسی پیدا کنند
• اگر کاربران زیادی همزمان به سرور وب دسترسی پیدا کنند، کاربران با پاسخ‌دهی کندتر مواجه می‌شوند
• ممکن است کاربران نتوانند به سرور متصل شوند

**راه‌حل:** یک Load Balancer بهترین تکنیک برای حل این مشکلات است.

---

## فایل ۶: 006.png
![نمودار Load Balancer](https://raw.githubusercontent.com/ehsan4232/translation/master/006.png)

---

## فایل ۷: 007.png
![معماری با Load Balancer](https://raw.githubusercontent.com/ehsan4232/translation/master/007.png)

---

## فایل ۸: 008.txt

### Load Balancer

یک **Load Balancer** به طور یکنواخت ترافیک ورودی را بین سرورهای وب توزیع می‌کند که در یک مجموعه load-balanced تعریف شده‌اند.

**نحوه کارکرد:**
همانطور که در نمودارها نشان داده شده، کاربران مستقیماً به سرورهای وب متصل نمی‌شوند. به جای آن:

۱. کاربران به IP عمومی Load Balancer متصل می‌شوند
۲. Load Balancer با سرورهای وب از طریق IP‌های خصوصی ارتباط برقرار می‌کند

---

## فایل ۹: 009.png
![جزئیات Load Balancer](https://raw.githubusercontent.com/ehsan4232/translation/master/009.png)

---

## فایل ۱۰: 010.txt

### فرآیند دسترسی کاربران

۱. **دسترسی از طریق DNS:** کاربران از طریق نام‌های دامنه مانند `api.mysite.com` به وب‌سایت‌ها دسترسی پیدا می‌کنند. معمولاً سیستم نام دامنه (DNS) یک سرویس پولی است که توسط اشخاص ثالث ارائه می‌شود و روی سرورهای ما میزبانی نمی‌شود.

۲. **دریافت IP:** نشانی پروتکل اینترنت (IP) به مرورگر یا برنامه موبایل بازگردانده می‌شود. در این مثال، نشانی IP، `15.125.23.214` است.

۳. **ارسال درخواست HTTP:** پس از دریافت نشانی IP، درخواست‌های پروتکل انتقال ابرمتن (HTTP) مستقیماً به وب‌سرور شما ارسال می‌شود.

۴. **دریافت پاسخ:** وب‌سرور صفحات HTML یا پاسخ JSON را برای نمایش برمی‌گرداند.

### منابع ترافیک

ترافیک به وب‌سرور شما از دو منبع می‌آید:

#### وب اپلیکیشن
از ترکیبی از زبان‌های سمت سرور (جاوا، پایتون، و غیره) برای مدیریت منطق کسب و کار، ذخیره‌سازی و غیره، و زبان‌های سمت کاربر (HTML و جاوااسکریپت) برای نمایش استفاده می‌کند.

#### اپلیکیشن موبایل
پروتکل HTTP پروتکل ارتباطی بین اپلیکیشن موبایل و وب‌سرور است. فرمت پاسخ API به صورت JavaScript Object Notation (JSON) به دلیل سادگی‌اش معمولاً استفاده می‌شود.

**نمونه درخواست API:**
```
GET /users/12 – دریافت شیء کاربر برای id = 12
```

---

**[۱] Hypertext Transfer Protocol (HTTP):** پروتکل انتقال ابرمتن

---

## فایل ۱۱: 011.png
![ساختار API](https://raw.githubusercontent.com/ehsan4232/translation/master/011.png)

---

## فایل ۱۲: 012.txt

### مقیاس‌دهی لایه داده

با حل مشکل عدم دسترسی سرور وب با اضافه کردن Load Balancer و یک سرور وب دوم، مشکل قابلیت انطباق وب tier حل شده است. حالا زمان رسیدگی به **لایه داده** است.

**مشکل:** لایه فعلی پایگاه داده برای مدیریت ترافیک و داده‌های زیاد، قابلیت انطباق ندارد.

### تکنیک‌های مقیاس‌دهی پایگاه داده

چندین تکنیک برای مقیاس‌دهی پایگاه داده وجود دارد:
• مقیاس‌دهی عمودی
• مقیاس‌دهی افقی  
• SQL tuning
• و غیره

#### مقیاس‌دهی عمودی (Scale Up)

**تعریف:** اضافه کردن قدرت بیشتر (CPU، RAM، DISK و غیره) به سرور موجود

**مثال:** Amazon Relational Database Service (RDS) امکان دارد تا ۲۴ TB RAM داشته باشد. این مقدار قابل توجهی برای بسیاری از برنامه‌ها کافی است.

**نواقص مقیاس‌دهی عمودی:**
• می‌توانید قدرت سخت‌افزاری را تا سقف مشخصی اضافه کنید
• خطر بالای SPOF (single point of failure) دارد
• هزینه کلی مقیاس‌دهی عمودی زیاد است - سرورهای قدرتمند بسیار گران هستند

---

## فایل ۱۳: 013.txt

### مقایسه تفصیلی مقیاس‌دهی عمودی و افقی

#### مقیاس‌دهی عمودی (Scale Up)
**تعریف:** اضافه کردن قدرت بیشتر (مانند CPU، RAM و غیره) به سرورهای شما

#### مقیاس‌دهی افقی (Scale-out)  
**تعریف:** اضافه کردن سرورهای بیشتر به مجموعه منابع

### مزایا و معایب

#### زمانی که ترافیک پایین است:
مقیاس‌دهی عمودی گزینه‌ای عالی است و **سادگی** آن از مزیت‌های اصلی‌اش می‌باشد.

#### محدودیت‌های مقیاس‌دهی عمودی:

**۱. محدودیت سخت:**
- اضافه کردن تعداد نامحدود CPU و حافظه به یک سرور غیرممکن است

**۲. عدم قابلیت Failover:**
- مقیاس‌دهی عمودی دارای قابلیت failover و قابلیت افزونگی نیست
- اگر یک سرور از کار بیفتد، وب‌سایت یا اپ به طور کامل از دسترس خارج می‌شود

### مشکلات طراحی فعلی

در طراحی قبلی، کاربران مستقیماً به سرور وب متصل می‌شوند:

**سناریو ۱:** اگر سرور وب به صورت آفلاین باشد، کاربران قادر به دسترسی به وب‌سایت نخواهند بود

**سناریو ۲:** اگر کاربران زیادی به طور همزمان به سرور وب دسترسی پیدا کنند و به محدودیت بار سرور وب برسند، کاربران:
- به طور معمول با پاسخ‌دهی کندتر مواجه می‌شوند
- یا نمی‌توانند به سرور متصل شوند

**راه‌حل:** یک Load Balancer بهترین تکنیک برای رفع این مشکلات است.

**نتیجه‌گیری:** مقیاس‌دهی افقی برای برنامه‌هایی با مقیاس بزرگ به دلیل محدودیت‌های مقیاس‌دهی عمودی، بیشتر مطلوب است.

---

### واژه‌نامه تخصصی

| اصطلاح انگلیسی | معادل فارسی |
|---|---|
| Scale up | مقیاس‌دهی عمودی |
| Scale-out | مقیاس‌دهی افقی |
| Failover | قابلیت انتقال بار |
| Load balancer | توزیع‌کننده بار |

---

## فایل ۱۴: 014.png
![مقایسه مقیاس‌دهی عمودی و افقی](https://raw.githubusercontent.com/ehsan4232/translation/master/014.png)

---

## فایل ۱۵: 015.txt

### مقیاس‌دهی افقی و Sharding

**مقیاس‌دهی افقی** همچنین به عنوان **Sharding** شناخته می‌شود.

#### تعریف Sharding
روشی است که در آن داده‌ها بین چندین سرور پایگاه داده توزیع می‌شوند. هر shard مشابه shard های دیگر طرح پایگاه داده را به اشتراک می‌گذارد، اگرچه داده‌های واقعی که روی هر shard نگهداری می‌شود منحصر به فرد است.

#### مثال عملی Sharding

نمونه‌ای از پایگاه داده sharded: داده‌های کاربر بر اساس **User ID** تخصیص داده می‌شوند.

**نحوه عملکرد:**
هر زمان که به داده‌های کاربر دسترسی پیدا می‌کنید، یک **Hash Function** برای تعیین اینکه کدام shard باید استفاده شود، اجرا می‌شود.

**مثال Hash Function:**
در مثال ما، `user_id % 4` به عنوان hash function استفاده می‌شود:

• اگر نتیجه ۰ باشد → از shard 0 برای ذخیره‌سازی و واکشی داده‌ها استفاده می‌شود
• اگر نتیجه ۱ باشد → از shard 1 استفاده می‌شود  
• همین منطق برای shard 2 و shard 3 نیز صادق است

---

## فایل ۱۶: 016.txt

### توزیع داده‌ها در Sharding

نمودار نشان می‌دهد که داده‌های کاربر در ۴ سرور توزیع شده‌اند:

#### توزیع بر اساس User ID:

**Shard 0:**
• User data with ID 0, 4, 8, 12 is stored in shard 0

**Shard 1:**  
• User data with ID 1, 5, 9, 13 is stored in shard 1

**Shard 2:**
• User data with ID 2, 6, 10, 14 is stored in shard 2

**Shard 3:**
• User data with ID 3, 7, 11, 15 is stored in shard 3

---

## فایل ۱۷: 017.png
![نمودار Sharding](https://raw.githubusercontent.com/ehsan4232/translation/master/017.png)

---

*[ادامه مستندات...]*

---

### نکات مهم فرمت‌بندی RTL

این سند با رعایت کامل اصول RTL برای متن فارسی طراحی شده است:

✅ **جهت راست به چپ** برای متن فارسی  
✅ **حفظ جهت چپ به راست** برای کدها و URLها  
✅ **فرمت‌بندی صحیح** برای فهرست‌ها و bullet pointها  
✅ **ترکیب صحیح** متن فارسی و انگلیسی  
✅ **نمایش تصاویر** با لینک مستقیم از مخزن اصلی  

---

**توضیح:** این نمونه شامل اولین ۱۷ فایل از مجموعه ۴۹۰ فایل شماست. برای ایجاد مستند کامل با تمام فایل‌ها، می‌توانید از اسکریپت پایتون ارائه شده استفاده کنید.

</div>
